@model PokerStrategy.Web.ViewModels.Forum.CategoryModel
@using PokerStrategy.Common
@using PokerStrategy.Data.Models
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
<head>
	<link rel="stylesheet" type="text/css" href="~/css/site.css" />
</head>

<center>
	<h1>Discussion Board</h1>
	<h1>@Model.Category.Title</h1>
</center>
<br />

<a type="button" class="btn btn-primary" style="background-color:royalblue; margin-bottom: 10px;" asp-controller="ForumThread" asp-action="Create" asp-route-id="@Model.Category.Id">Open new thread</a>



@if (Model.Threads.Any())
{
	<table class="table table-bordered  table-custom">
		<tbody>
			@foreach (var thread in Model.Threads)
			{
				<tr>
					<td>
						<a asp-controller="ForumThread"
						   asp-action="Thread"
						   asp-route-id="@thread.Id">
							@thread.Title
						</a>
					</td>
					<td>
						@thread.AuthorName
					</td>
					<td>
						@thread.DateCreated
					</td>
					<td>
						@thread.RepliesCount
					</td>

					@if (this.User.IsInRole(GlobalConstants.AdminRoleName))
					{
						<td>
							<span id="deleteButton">
								<a type="button" class="btn btn-primary" style="background-color:red" asp-area="Administration" asp-controller="Admin" asp-action="DeleteThreadById" asp-route-id="@thread.Id">Delete</a>
							</span>
						</td>
					}

				</tr>
			}
		</tbody>
	</table>
}
else
{
<center>
	<h2>No threads in this Board yet.</h2>
</center>
}